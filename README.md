# VK и TG боты для техподдержки с интеграцией DialogFlow

![Иллюстрация к проекту](https://github.com/ITerekhov98/chat_bots_lesson_3/blob/b7d4c490041a2b0a6000b48ccf98e16f98ff41f7/animation.gif)

### Ссылки на работающих ботов:
- [VK](https://vk.com/club213637331)
- [Telegram](https://t.me/sam_isdat_bot)


Чат-боты, реализованные в этом репозитории используют сервис распознавания языка от Google - [DialogFlow](https://cloud.google.com/dialogflow). Они охватывают большинство шаблонных запросов от пользователей, на такие темы как:
- Приветствие
- Вопросы по бану
- Вопросы от действующих партнёров
- Что делать если забыл пароль
- Удаление аккаунта
- Устройство на работу

### Установка и запуск:
Скачайте репозиторий с кодом, создайте  файл `.env` и наполните его необходимыми данными, в формате `KEY=VALUE`. Ожидаются следующие параметры:
- `TG_BOT_TOKEN` - токен вашего бота в тг
- `GOOGLE_APPLICATION_CREDENTIALS` - путь к json-файлу, содержащему необходимую информацию для доступа к вашему проекту DialogFlow. Подробнее можно посмотреть [здесь](https://cloud.google.com/docs/authentication/getting-started)
- `GOOGLE_PROJECT_ID` - ID вашего проекта в DialogFlow. Как создать посмотрите [здесь](https://cloud.google.com/dialogflow/es/docs/quick/setup)
- `VK_API_TOKEN` - Токен, выданный VK API, для доступа бота к сообщениям. Получить его можно открыв *Ваша группа -> Настройки -> Работа с API*
- `SERVICE_TG_CHAT_ID` - ID телеграм чата в который будут отправляться репорты о возможных ошибках

Далее из терминала запускайте скрипты:
```
python vk_bot.py & python tg_bot.py
```
### Обучение новым сценариям
Вы можете добавлять новые сценарии обработки сообщений вручную, на странице вашего проекта в DialogFlow, либо воспользоваться готовым скриптом. Он построен на методе API от DialogFlow, поэтому вначале убедитесь что указали все нужные данные в файле `.env`. Далее создайте json-файл в таком формате:
```
{
    "Имя сценария 1": {
        "questions": [
              "вариант вопроса",
              "вариант вопроса",
              "вариант вопроса"
        ],
        "answer": "Вариант ответа"
    },
    "Имя сценария 2": {
        "questions": [
              "вариант вопроса",
              "вариант вопроса",
              "вариант вопроса"
        ],
        "answer": "Вариант ответа"
    },
}
```
Теперь запускайте скрипт командой из консоли:
```
$ python dialog_flow_lib.py путь_к_вашему_файлу
```
